---
title: Streaming Responses
description: Display AI responses in real-time with Server-Sent Events
---

The streaming endpoint returns AI responses token-by-token using **Server-Sent Events (SSE)**, giving users instant feedback instead of waiting for the full response.

## Quick example

```javascript
const response = await fetch("https://api.answira.com/v1/messages/stream", {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({
    session_id: "ses_123",
    message: "How do I reset my password?",
  }),
});

const reader = response.body.getReader();
const decoder = new TextDecoder();
let fullText = "";

while (true) {
  const { done, value } = await reader.read();
  if (done) break;

  for (const line of decoder.decode(value).split("\n")) {
    if (!line.startsWith("data: ")) continue;
    const data = line.slice(6);
    if (data === "[DONE]") return;

    const event = JSON.parse(data);
    if (event.type === "text-delta") {
      fullText += event.delta;
      updateUI(fullText); // Render incrementally
    }
  }
}
```

## Event flow

A typical stream looks like this:

```
message-start → text-start → text-delta (repeated) → text-end → finish → [DONE]
```

For models with thinking capability (Claude, etc.):

```
message-start → reasoning-start → reasoning-delta (repeated) → reasoning-end → text-start → text-delta (repeated) → text-end → finish → [DONE]
```

## Event types

| Event | Payload | Description |
|-------|---------|-------------|
| `message-start` | `{ messageId }` | Stream begins |
| `text-start` | `{ id }` | Response text begins |
| `text-delta` | `{ id, delta }` | One token of response |
| `text-end` | `{ id }` | Response text complete |
| `reasoning-start` | `{ id }` | Model thinking begins |
| `reasoning-delta` | `{ id, delta }` | One token of reasoning |
| `reasoning-end` | `{ id }` | Model thinking complete |
| `finish` | `{ usage }` | Stream complete |
| `error` | `{ message }` | Error occurred |

## Python example

```python
import requests
import json

response = requests.post(
    "https://api.answira.com/v1/messages/stream",
    json={"session_id": "ses_123", "message": "Hello"},
    stream=True,
)

for line in response.iter_lines(decode_unicode=True):
    if not line or not line.startswith("data: "):
        continue
    data = line[6:]
    if data == "[DONE]":
        break
    event = json.loads(data)
    if event["type"] == "text-delta":
        print(event["delta"], end="", flush=True)
```

## Error handling

If an error occurs mid-stream, you'll receive an `error` event:

```
data: {"type":"error","message":"Rate limit exceeded"}
```

Always handle the `error` event type in your parser and show an appropriate message to the user.
